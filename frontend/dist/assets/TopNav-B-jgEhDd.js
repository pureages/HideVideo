import{u as E,a as H,j as p,o as N,I as T,s as I,n as d,c as u,b as e,t as i,d as l,f as z,v as D,H as A,e as w,h as v,E as R,D as K,m as O}from"./index--Q4BRkWj.js";import{_ as U}from"./AppFooter-Deo1k4jp.js";const j={class:"nav-left"},P={key:0,class:"nav-center"},Z={class:"search-box"},q=["placeholder"],F={class:"nav-right"},G={key:0,class:"dropdown-menu"},J={__name:"TopNav",props:{showSearch:{type:Boolean,default:!1},modelValue:{type:String,default:""}},emits:["update:modelValue","search","logout"],setup(f,{emit:B}){const M=f,k=B,c=O(),y=E(),{t:s}=H(),m=p(localStorage.getItem("theme")||"purple"),L=K(()=>`theme-${m.value}`);N(()=>{document.addEventListener("click",V),window.addEventListener("theme-change",x),window.addEventListener("storage",C)}),T(()=>{document.removeEventListener("click",V),window.removeEventListener("theme-change",x),window.removeEventListener("storage",C)});function x(){m.value=localStorage.getItem("theme")||"purple"}function C(o){o.key==="theme"&&(m.value=o.newValue||"purple")}const r=p(!1),g=p(null),a=p("");I(()=>M.modelValue,o=>{a.value=o||""});function S(){r.value=!r.value}function h(o){c.push(o),r.value=!1}function $(){a.value="",k("update:modelValue",""),k("search")}async function b(){r.value=!1,await y.logout(),c.push("/login")}function V(o){g.value&&!g.value.contains(o.target)&&(r.value=!1)}return(o,t)=>(d(),u("header",{class:R(["top-nav",L.value])},[e("div",j,[e("div",{class:"logo",onClick:t[0]||(t[0]=n=>o.$router.push("/"))},[t[8]||(t[8]=e("svg",{width:"28",height:"28",viewBox:"0 0 48 48",fill:"none"},[e("rect",{x:"4",y:"8",width:"40",height:"32",rx:"4",stroke:"currentColor","stroke-width":"2"}),e("path",{d:"M20 18L30 24L20 30V18Z",fill:"currentColor"})],-1)),e("span",null,i(l(s)("app.name")),1)])]),f.showSearch?(d(),u("div",P,[e("div",Z,[t[10]||(t[10]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"11",cy:"11",r:"8"}),e("path",{d:"M21 21l-4.35-4.35"})],-1)),z(e("input",{type:"text",placeholder:l(s)("topNav.searchPlaceholder"),onKeyup:t[1]||(t[1]=A(n=>o.$emit("search"),["enter"])),onInput:t[2]||(t[2]=n=>o.$emit("update:modelValue",n.target.value)),"onUpdate:modelValue":t[3]||(t[3]=n=>a.value=n)},null,40,q),[[D,a.value]]),a.value?(d(),u("button",{key:0,class:"clear-btn",onClick:$},[...t[9]||(t[9]=[e("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])):w("",!0)])])):w("",!0),e("div",F,[e("div",{class:"dropdown",ref_key:"dropdownRef",ref:g},[e("button",{class:"dropdown-trigger",onClick:S},[t[11]||(t[11]=e("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("line",{x1:"3",y1:"12",x2:"21",y2:"12"}),e("line",{x1:"3",y1:"6",x2:"21",y2:"6"}),e("line",{x1:"3",y1:"18",x2:"21",y2:"18"})],-1)),e("span",null,i(l(s)("topNav.nav")),1),t[12]||(t[12]=e("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("polyline",{points:"6 9 12 15 18 9"})],-1))]),r.value?(d(),u("div",G,[e("div",{class:"dropdown-item",onClick:t[4]||(t[4]=n=>h("/"))},[t[13]||(t[13]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M3 9l9-7 9 7v11a2 2 0 01-2 2H5a2 2 0 01-2-2z"}),e("polyline",{points:"9 22 9 12 15 12 15 22"})],-1)),v(" "+i(l(s)("menu.home")),1)]),l(y).role==="admin"?(d(),u("div",{key:0,class:"dropdown-item",onClick:t[5]||(t[5]=n=>h("/libraries"))},[t[14]||(t[14]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"})],-1)),v(" "+i(l(s)("menu.libraries")),1)])):w("",!0),e("div",{class:"dropdown-item",onClick:t[6]||(t[6]=n=>h("/folders"))},[t[15]||(t[15]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M22 19a2 2 0 01-2 2H4a2 2 0 01-2-2V5a2 2 0 012-2h5l2 3h9a2 2 0 012 2z"}),e("line",{x1:"9",y1:"14",x2:"15",y2:"14"})],-1)),v(" "+i(l(s)("menu.folders")),1)]),e("div",{class:"dropdown-item",onClick:t[7]||(t[7]=n=>h("/settings"))},[t[16]||(t[16]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("circle",{cx:"12",cy:"12",r:"3"}),e("path",{d:"M19.4 15a1.65 1.65 0 00.33 1.82l.06.06a2 2 0 010 2.83 2 2 0 01-2.83 0l-.06-.06a1.65 1.65 0 00-1.82-.33 1.65 1.65 0 00-1 1.51V21a2 2 0 01-2 2 2 2 0 01-2-2v-.09A1.65 1.65 0 009 19.4a1.65 1.65 0 00-1.82.33l-.06.06a2 2 0 01-2.83 0 2 2 0 010-2.83l.06-.06a1.65 1.65 0 00.33-1.82 1.65 1.65 0 00-1.51-1H3a2 2 0 01-2-2 2 2 0 012-2h.09A1.65 1.65 0 004.6 9a1.65 1.65 0 00-.33-1.82l-.06-.06a2 2 0 010-2.83 2 2 0 012.83 0l.06.06a1.65 1.65 0 001.82.33H9a1.65 1.65 0 001-1.51V3a2 2 0 012-2 2 2 0 012 2v.09a1.65 1.65 0 001 1.51 1.65 1.65 0 001.82-.33l.06-.06a2 2 0 012.83 0 2 2 0 010 2.83l-.06.06a1.65 1.65 0 00-.33 1.82V9a1.65 1.65 0 001.51 1H21a2 2 0 012 2 2 2 0 01-2 2h-.09a1.65 1.65 0 00-1.51 1z"})],-1)),v(" "+i(l(s)("menu.settings")),1)]),t[18]||(t[18]=e("div",{class:"dropdown-divider"},null,-1)),e("div",{class:"dropdown-item logout",onClick:b},[t[17]||(t[17]=e("svg",{width:"18",height:"18",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[e("path",{d:"M9 21H5a2 2 0 01-2-2V5a2 2 0 012-2h4"}),e("polyline",{points:"16 17 21 12 16 7"}),e("line",{x1:"21",y1:"12",x2:"9",y2:"12"})],-1)),v(" "+i(l(s)("topNav.logout")),1)])])):w("",!0)],512)])],2))}},X=U(J,[["__scopeId","data-v-21b11c07"]]);export{X as T};
