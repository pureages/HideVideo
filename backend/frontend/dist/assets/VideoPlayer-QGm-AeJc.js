import{G as g,a as ot,j as r,s as be,o as lt,I as nt,n,c as s,b as t,e as f,f as P,J as xe,w as V,E as S,p as _e,t as a,x as st,v as Me,H as Te,d as c,F as A,r as E,h as b,g as Pe,D as F,K as Ve,B as it,C as at,m as rt}from"./index--Q4BRkWj.js";import{a as R,t as dt}from"./actor-CwJ4gNpB.js";import{_ as ut}from"./AppFooter-Deo1k4jp.js";const w={getVideos(i){return g.get("/videos",{params:i})},getFolderTree(){return g.get("/videos/folders")},getVideoByPath(i,m){return g.get("/videos/by-path",{params:{filepath:i,library_id:m}})},getVideo(i){return g.get(`/videos/${i}`)},updateRating(i,m){return g.put(`/videos/${i}/rating`,{rating:m})},updateFilename(i,m){return g.put(`/videos/${i}/filename`,{filename:m})},incrementPlayCount(i){return g.post(`/videos/${i}/play`)},deleteVideo(i){return g.delete(`/videos/${i}`)},getVideoTags(i){return g.get(`/videos/${i}/tags`)},addVideoTag(i,m){return g.post(`/videos/${i}/tags`,{tag_id:m})},removeVideoTag(i,m){return g.delete(`/videos/${i}/tags/${m}`)},getComments(i){return g.get(`/videos/${i}/comments`)},addComment(i,m){return g.post(`/videos/${i}/comments`,{content:m})},deleteComment(i){return g.delete(`/comments/${i}`)}},vt={class:"player-container"},ct={class:"player-main"},ft=["src"],ht={key:0,class:"loading-overlay"},gt={key:1,class:"loading-overlay"},mt={key:0,width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},yt={key:1,width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},pt={key:0,width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},kt={key:1,width:"36",height:"36",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},wt={class:"controls"},Ct={class:"controls-row"},bt={class:"controls-left"},xt={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},_t={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"currentColor"},Mt={class:"time-display"},Tt={class:"controls-right"},Pt={class:"speed-control"},Vt={key:0,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},$t={key:1,width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},Bt={class:"player-sidebar"},At={class:"video-details"},Et={key:0,class:"toast-success"},Ft={key:1,class:"toast-error"},Dt={class:"filename-hint"},Lt={class:"info-section"},It={class:"info-row"},St={key:0,class:"no-actors"},Rt=["onClick"],Nt=["onClick"],zt={key:0,class:"actor-separator"},Ut=["title"],Ot={class:"info-row"},jt={class:"rating"},qt=["onClick"],Ht={class:"video-stats"},Kt={key:0,title:"视频ID"},Gt=["title"],Jt=["title"],Xt=["title"],Qt={key:4,class:"delete-section"},Wt={class:"tags-section"},Yt={class:"tags-list"},Zt=["onClick"],eo={class:"add-tag"},to={class:"tag-select-wrapper"},oo={key:0},lo={key:1},no={key:0,class:"tag-dropdown"},so=["value"],io={key:0,class:"no-tags"},ao=["disabled"],ro={class:"comments-section"},uo={class:"comment-list"},vo={class:"comment-meta"},co={class:"comment-time"},fo={key:0,class:"comment-author"},ho={key:0,class:"no-comments"},go={class:"add-comment"},mo=["disabled"],yo={class:"modal-content"},po={class:"modal-header"},ko={class:"modal-body"},wo={class:"actor-select-list"},Co=["value"],bo={class:"actor-select-name"},xo={key:0,class:"no-actors-tip"},_o={class:"modal-footer"},Mo=["disabled"],To={__name:"VideoPlayer",props:{video:{type:Object,required:!0},videoList:{type:Array,default:()=>[]},currentIndex:{type:Number,default:0}},emits:["close","prev-video","next-video","deleted","click-actor"],setup(i,{emit:m}){rt();const{t:v,locale:X}=ot();function $e(o,e){try{let l=X==null?void 0:X.value;(!l||typeof l!="string")&&(l="zh-CN");let h=l==="en"?it:at;const ne=o.split(".");let C=h;for(const J of ne)if(C&&typeof C=="object")C=C[J];else return o;return typeof C!="string"?o:(e&&Object.keys(e).forEach(J=>{C=C.replace(new RegExp("{{"+J+"}}","g"),e[J])}),C)}catch{return o}}const d=i,Q=m,u=r(null),N=r(!0),z=r(!1),$=r(!1),U=r(!1),D=r(0),x=r(0),W=r(1),Y=r(0),_=r([]),y=r([]),O=r([]),Z=r([]),L=r([]),p=r([]),k=r([]),B=r(""),ee=r(!1),j=r(!1),q=r(!1),H=r(!1),M=r(localStorage.getItem("arrowDirection")||"horizontal"),I=r(!1),T=r(""),se=r(!1),te=r(null),oe=r(!1),K=r(!1),ie=r(""),Be=r(localStorage.getItem("allowDeleteVideo")==="true"),ae=F(()=>d.currentIndex>0),re=F(()=>d.currentIndex<d.videoList.length-1);be(M,o=>{localStorage.setItem("arrowDirection",o)});function Ae(){ae.value&&Q("prev-video")}function Ee(){re.value&&Q("next-video")}function Fe(){j.value=!0}function De(){j.value=!1}const de=F(()=>`/api/videos/${d.video.id}/stream`),ue=F(()=>x.value?D.value/x.value*100:0);be(()=>d.video,async o=>{if(o&&(N.value=!0,z.value=!1,$.value=!1,ee.value=!1,D.value=0,x.value=0,await fe(),await Ve(),u.value))try{await u.value.play()}catch{console.log("自动播放被阻止")}});const ve=F(()=>{const o=_.value.map(e=>e.id);return Z.value.filter(e=>!o.includes(e.id))}),ce=F(()=>{const o=y.value.map(e=>e.id);return L.value.filter(e=>!o.includes(e.id))});lt(async()=>{if(await fe(),document.addEventListener("fullscreenchange",ye),document.addEventListener("click",we),u.value)try{await u.value.play()}catch{console.log("自动播放被阻止，用户需手动点击播放")}}),nt(()=>{document.removeEventListener("fullscreenchange",ye),document.removeEventListener("click",we),document.fullscreenElement&&document.exitFullscreen()});async function fe(){try{const o=await w.getVideo(d.video.id);Y.value=o.rating||0,_.value=o.tags||[],y.value=await R.getVideoActors(d.video.id),O.value=await w.getComments(d.video.id),Z.value=await dt.getTags(),L.value=await R.getActors()}catch(o){console.error(o)}}async function Le(){try{await w.incrementPlayCount(d.video.id)}catch(o){console.error(o)}}function Ie(){N.value=!1,z.value=!1,u.value&&(x.value=u.value.duration)}function Se(){u.value&&(D.value=u.value.currentTime)}function Re(){console.log("========== 播放视频 =========="),console.log("视频ID:",d.video.id),console.log("视频文件名:",d.video.filename),console.log("视频路径:",de.value),console.log("视频信息:",d.video),console.log("=============================="),$.value=!0,ee.value||(ee.value=!0,Le())}function Ne(){$.value=!1}function ze(){$.value=!1}function he(){u.value&&(u.value.paused?u.value.play():u.value.pause())}function Ue(){N.value=!1,z.value=!0,$.value=!1}function ge(o){u.value&&(u.value.currentTime=Math.max(0,Math.min(x.value,D.value+o)))}function Oe(o){if(!u.value)return;const e=o.currentTarget.getBoundingClientRect(),l=(o.clientX-e.left)/e.width;u.value.currentTime=l*x.value}function je(){u.value&&(u.value.playbackRate=W.value)}function me(){var o,e;document.fullscreenElement?(document.exitFullscreen(),U.value=!1):((e=(o=u.value)==null?void 0:o.parentElement)==null||e.requestFullscreen(),U.value=!0)}function ye(){U.value=!!document.fullscreenElement}async function qe(o){try{await w.updateRating(d.video.id,o),Y.value=o}catch(e){console.error(e)}}async function He(){if(p.value.length!==0)try{for(const o of p.value){await w.addVideoTag(d.video.id,o);const e=Z.value.find(l=>l.id===o);e&&!_.value.find(l=>l.id===o)&&_.value.push(e)}p.value=[],q.value=!1}catch(o){console.error(o)}}async function Ke(o){try{await w.removeVideoTag(d.video.id,o),_.value=_.value.filter(e=>e.id!==o)}catch(e){console.error(e)}}async function Ge(){if(k.value.length!==0)try{for(const o of k.value){await R.addVideoActor(d.video.id,o);const e=L.value.find(l=>l.id===o);e&&!y.value.find(l=>l.id===o)&&y.value.push(e)}k.value=[],G()}catch(o){console.error(o)}}function Je(){L.value.length===0?R.getActors().then(o=>{L.value=o,H.value=!0}):H.value=!0}function G(){H.value=!1,k.value=[]}function Xe(o){window.open(`/actor/${o.id}`,"_blank")}async function Qe(o){try{await R.removeVideoActor(d.video.id,o),y.value=y.value.filter(e=>e.id!==o)}catch(e){console.error(e)}}async function We(){if(B.value.trim())try{const o=await w.addComment(d.video.id,B.value);O.value.unshift(o.comment),B.value=""}catch(o){console.error(o)}}function pe(o){if(!o||isNaN(o))return"00:00";const e=Math.floor(o/3600),l=Math.floor(o%3600/60),h=Math.floor(o%60);return e>0?`${e}:${l.toString().padStart(2,"0")}:${h.toString().padStart(2,"0")}`:`${l}:${h.toString().padStart(2,"0")}`}function Ye(o){if(!o)return"--:--";const e=Math.floor(o/3600),l=Math.floor(o%3600/60),h=Math.floor(o%60);return e>0?`${e}小时${l}分`:`${l}分${h}秒`}function ke(o){if(!o)return"";const e=o.lastIndexOf(".");return e>0?o.substring(0,e):o}function Ze(){T.value=ke(d.video.filename),I.value=!0,Ve(()=>{te.value&&te.value.focus()})}function we(o){if(!I.value)return;const e=document.querySelector(".filename-edit"),l=document.querySelector(".filename-display");e&&e.contains(o.target)||l&&l.contains(o.target)||setTimeout(()=>{T.value.trim()?le():Ce()},10)}function Ce(){I.value=!1,T.value=""}async function le(){var o,e;if(T.value.trim()){se.value=!0,K.value=!1;try{const l=await w.updateFilename(d.video.id,T.value.trim());d.video.filename=l.video.filename,d.video.filepath=l.video.filepath,I.value=!1,oe.value=!0,setTimeout(()=>{oe.value=!1},500)}catch(l){console.error("更新文件名失败:",l),ie.value=((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.error)||"更新失败",K.value=!0,setTimeout(()=>{K.value=!1},3e3)}finally{se.value=!1}}}function et(o){return o?new Date(o).toLocaleString("zh-CN",{year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit"}):""}async function tt(){var o,e;if(confirm("确定要删除这个视频吗？此操作不可恢复！"))try{await w.deleteVideo(d.video.id),Q("deleted")}catch(l){console.error("删除视频失败:",l),alert(((e=(o=l.response)==null?void 0:o.data)==null?void 0:e.error)||"删除视频失败")}}return(o,e)=>(n(),s("div",{class:"modal-overlay",onClick:e[10]||(e[10]=V(l=>o.$emit("close"),["self"]))},[t("div",vt,[t("div",ct,[t("div",{class:"video-wrapper",onMouseenter:Fe,onMouseleave:De},[t("video",{ref_key:"videoRef",ref:u,src:de.value,onLoadedmetadata:Ie,onTimeupdate:Se,onEnded:ze,onPlay:Re,onPause:Ne,onError:Ue,onClick:he,onDblclick:me},null,40,ft),N.value?(n(),s("div",ht,[...e[11]||(e[11]=[t("div",{class:"spinner"},null,-1)])])):f("",!0),z.value?(n(),s("div",gt,[...e[12]||(e[12]=[t("div",{class:"error-text"},"视频加载失败，请稍后重试",-1)])])):f("",!0),P(t("button",{class:S(["nav-arrow",[M.value==="horizontal"?"nav-prev":"nav-top",M.value]]),onClick:V(Ae,["stop"])},[M.value==="horizontal"?(n(),s("svg",mt,[...e[13]||(e[13]=[t("polyline",{points:"15 18 9 12 15 6"},null,-1)])])):(n(),s("svg",yt,[...e[14]||(e[14]=[t("polyline",{points:"18 15 12 9 6 15"},null,-1)])]))],2),[[xe,j.value&&ae.value]]),P(t("button",{class:S(["nav-arrow",[M.value==="horizontal"?"nav-next":"nav-bottom",M.value]]),onClick:V(Ee,["stop"])},[M.value==="horizontal"?(n(),s("svg",pt,[...e[15]||(e[15]=[t("polyline",{points:"9 18 15 12 9 6"},null,-1)])])):(n(),s("svg",kt,[...e[16]||(e[16]=[t("polyline",{points:"6 9 12 15 18 9"},null,-1)])]))],2),[[xe,j.value&&re.value]])],32),t("div",wt,[t("div",{class:"progress-bar",onClick:Oe},[t("div",{class:"progress",style:_e({width:ue.value+"%"})},null,4),t("div",{class:"progress-handle",style:_e({left:ue.value+"%"})},null,4)]),t("div",Ct,[t("div",bt,[t("button",{class:"control-btn",onClick:he},[$.value?(n(),s("svg",_t,[...e[18]||(e[18]=[t("rect",{x:"6",y:"4",width:"4",height:"16"},null,-1),t("rect",{x:"14",y:"4",width:"4",height:"16"},null,-1)])])):(n(),s("svg",xt,[...e[17]||(e[17]=[t("polygon",{points:"5 3 19 12 5 21 5 3"},null,-1)])]))]),t("button",{class:"control-btn",onClick:e[0]||(e[0]=l=>ge(-10))},[...e[19]||(e[19]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M2.5 2v6h6M2.66 15.57a10 10 0 1 0 .57-8.38"})],-1),t("span",{class:"skip-text"},"10",-1)])]),t("button",{class:"control-btn",onClick:e[1]||(e[1]=l=>ge(10))},[...e[20]||(e[20]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M21.5 2v6h-6M21.34 15.57a10 10 0 1 1-.57-8.38"})],-1),t("span",{class:"skip-text"},"10",-1)])]),t("div",Mt,a(pe(D.value))+" / "+a(pe(x.value)),1)]),t("div",Tt,[t("div",Pt,[P(t("select",{"onUpdate:modelValue":e[2]||(e[2]=l=>W.value=l),onChange:je,class:"speed-select"},[...e[21]||(e[21]=[t("option",{value:.5},"0.5x",-1),t("option",{value:.75},"0.75x",-1),t("option",{value:1},"1x",-1),t("option",{value:1.25},"1.25x",-1),t("option",{value:1.5},"1.5x",-1),t("option",{value:2},"2x",-1)])],544),[[st,W.value]])]),t("button",{class:"control-btn",onClick:me},[U.value?(n(),s("svg",$t,[...e[23]||(e[23]=[t("path",{d:"M4 14h6m0 0v6m0-6L3 21M20 10h-6m0 0V4m0 6l7-7"},null,-1)])])):(n(),s("svg",Vt,[...e[22]||(e[22]=[t("path",{d:"M8 3H5a2 2 0 00-2 2v3m18 0V5a2 2 0 00-2-2h-3m0 18h3a2 2 0 002-2v-3M3 16v3a2 2 0 002 2h3"},null,-1)])]))])])])])]),t("div",Bt,[t("button",{class:"close-btn",onClick:e[3]||(e[3]=l=>o.$emit("close"))},[...e[24]||(e[24]=[t("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])]),t("div",At,[oe.value?(n(),s("div",Et," 视频名修改成功！ ")):f("",!0),K.value?(n(),s("div",Ft,a(ie.value),1)):f("",!0),I.value?(n(),s("div",{key:3,class:"filename-edit",onClick:e[5]||(e[5]=V(()=>{},["stop"]))},[P(t("input",{"onUpdate:modelValue":e[4]||(e[4]=l=>T.value=l),type:"text",class:"filename-input",ref_key:"filenameInputRef",ref:te,onKeyup:[Te(le,["enter"]),Te(Ce,["escape"])],onBlur:le},null,544),[[Me,T.value]]),t("span",Dt,a(c(v)("videoPlayer.saveFilename")),1)])):(n(),s("h2",{key:2,class:"filename-display",onClick:V(Ze,["stop"])},a(ke(i.video.filename)),1)),t("div",Lt,[t("div",It,[t("label",null,a(c(v)("videoPlayer.actors"))+"：",1),y.value.length===0?(n(),s("span",St,a(c(v)("videoPlayer.noActors")),1)):(n(!0),s(A,{key:1},E(y.value,(l,h)=>(n(),s("span",{key:l.id,class:"actor-link",onClick:ne=>Xe(l)},[b(a(l.name)+" ",1),t("button",{class:"actor-remove",onClick:V(ne=>Qe(l.id),["stop"])},[...e[25]||(e[25]=[t("svg",{width:"10",height:"10",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])],8,Nt),h<y.value.length-1?(n(),s("span",zt,", ")):f("",!0)],8,Rt))),128)),t("button",{class:"add-actor-btn",onClick:Je,title:c(v)("videoPlayer.addActor")},[...e[26]||(e[26]=[t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),t("line",{x1:"5",y1:"12",x2:"19",y2:"12"})],-1)])],8,Ut)]),t("div",Ot,[t("label",null,a(c(v)("videoPlayer.rating"))+"：",1),t("div",jt,[(n(),s(A,null,E(10,l=>t("span",{key:l,class:S(["rating-star",{active:l<=Y.value}]),onClick:h=>qe(l)},[...e[27]||(e[27]=[t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"currentColor"},[t("polygon",{points:"12 2 15.09 8.26 22 9.27 17 14.14 18.18 21.02 12 17.77 5.82 21.02 7 14.14 2 9.27 8.91 8.26 12 2"})],-1)])],10,qt)),64))])]),e[28]||(e[28]=t("div",{class:"info-divider"},null,-1))]),t("div",Ht,[i.video.id?(n(),s("span",Kt,[e[29]||(e[29]=t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M4 9h16M4 15h16M10 3v18M14 3v18"})],-1)),b(" "+a(i.video.id),1)])):f("",!0),i.video.duration?(n(),s("span",{key:1,title:c(v)("videoPlayer.videoDuration")},[e[30]||(e[30]=t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("circle",{cx:"12",cy:"12",r:"10"}),t("polyline",{points:"12 6 12 12 16 14"})],-1)),b(" "+a(Ye(i.video.duration)),1)],8,Gt)):f("",!0),i.video.width&&i.video.height?(n(),s("span",{key:2,title:c(v)("videoPlayer.resolution")},[e[31]||(e[31]=t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("rect",{x:"2",y:"3",width:"20",height:"14",rx:"2",ry:"2"}),t("line",{x1:"8",y1:"21",x2:"16",y2:"21"}),t("line",{x1:"12",y1:"17",x2:"12",y2:"21"})],-1)),b(" "+a(i.video.width)+"x"+a(i.video.height),1)],8,Jt)):f("",!0),i.video.play_count?(n(),s("span",{key:3,title:c(v)("videoPlayer.playCountTimes")},[e[32]||(e[32]=t("svg",{width:"14",height:"14",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polygon",{points:"5 3 19 12 5 21 5 3"})],-1)),b(" "+a(i.video.play_count)+" "+a(c(v)("videoPlayer.playCountUnit")),1)],8,Xt)):f("",!0)]),e[36]||(e[36]=t("div",{class:"info-divider"},null,-1)),Be.value?(n(),s("div",Qt,[t("button",{class:"btn btn-danger",onClick:tt},[e[33]||(e[33]=t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"3 6 5 6 21 6"}),t("path",{d:"M19 6v14a2 2 0 01-2 2H7a2 2 0 01-2-2V6m3 0V4a2 2 0 012-2h4a2 2 0 012 2v2"})],-1)),b(" "+a(c(v)("videoPlayer.deleteVideo")),1)])])):f("",!0),t("div",Wt,[t("label",null,a(c(v)("videoPlayer.tags"))+"：",1),t("div",Yt,[(n(!0),s(A,null,E(_.value,l=>(n(),s("span",{key:l.id,class:"tag"},[b(a(l.name)+" ",1),t("button",{class:"tag-remove",onClick:h=>Ke(l.id)},[...e[34]||(e[34]=[t("svg",{width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])],8,Zt)]))),128))]),t("div",eo,[t("div",to,[t("div",{class:"tag-select-label",onClick:e[6]||(e[6]=l=>q.value=!q.value)},[p.value.length===0?(n(),s("span",oo,a(c(v)("videoPlayer.selectTags")),1)):(n(),s("span",lo,a($e("videoPlayer.selectedTags",{count:p.value.length})),1)),e[35]||(e[35]=t("svg",{width:"16",height:"16",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("polyline",{points:"6 9 12 15 18 9"})],-1))]),q.value?(n(),s("div",no,[(n(!0),s(A,null,E(ve.value,l=>(n(),s("label",{key:l.id,class:S(["tag-option",{selected:p.value.includes(l.id)}])},[P(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[7]||(e[7]=h=>p.value=h)},null,8,so),[[Pe,p.value]]),b(" "+a(l.name),1)],2))),128)),ve.value.length===0?(n(),s("div",io,a(c(v)("videoPlayer.noTags")),1)):f("",!0)])):f("",!0)]),t("button",{class:"btn btn-primary btn-sm",onClick:He,disabled:p.value.length===0}," 添加 ",8,ao)])]),t("div",ro,[t("label",null,a(c(v)("videoPlayer.comments"))+"：",1),t("div",uo,[(n(!0),s(A,null,E(O.value,l=>(n(),s("div",{key:l.id,class:"comment-item"},[t("p",null,a(l.content),1),t("div",vo,[t("span",co,a(et(l.created_at)),1),l.user?(n(),s("span",fo,"by "+a(l.user.username),1)):f("",!0)])]))),128)),O.value.length===0?(n(),s("p",ho,a(c(v)("videoPlayer.noTags")),1)):f("",!0)]),t("div",go,[P(t("textarea",{"onUpdate:modelValue":e[8]||(e[8]=l=>B.value=l),placeholder:"添加评论...",rows:"2"},null,512),[[Me,B.value]]),t("button",{class:"btn btn-primary btn-sm",onClick:We,disabled:!B.value.trim()}," 发表评论 ",8,mo)])])])])]),H.value?(n(),s("div",{key:0,class:"modal-overlay",onClick:V(G,["self"])},[t("div",yo,[t("div",po,[t("h3",null,a(c(v)("videoPlayer.addActor")),1),t("button",{class:"modal-close",onClick:G},[...e[37]||(e[37]=[t("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor","stroke-width":"2"},[t("path",{d:"M18 6L6 18M6 6l12 12"})],-1)])])]),t("div",ko,[t("div",wo,[(n(!0),s(A,null,E(ce.value,l=>(n(),s("label",{key:l.id,class:S(["actor-select-item",{selected:k.value.includes(l.id)}])},[P(t("input",{type:"checkbox",value:l.id,"onUpdate:modelValue":e[9]||(e[9]=h=>k.value=h)},null,8,Co),[[Pe,k.value]]),t("span",bo,a(l.name),1)],2))),128)),ce.value.length===0?(n(),s("div",xo,a(c(v)("videoPlayer.noTagsAvailable")),1)):f("",!0)])]),t("div",_o,[t("button",{class:"btn btn-secondary",onClick:G},a(c(v)("videoPlayer.cancel")),1),t("button",{class:"btn btn-primary",onClick:Ge,disabled:k.value.length===0},a(c(v)("videoPlayer.add"))+" ("+a(k.value.length)+") ",9,Mo)])])])):f("",!0)]))}},Bo=ut(To,[["__scopeId","data-v-01072838"]]);export{Bo as V,w as v};
